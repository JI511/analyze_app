{% load houseplant_tags %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reddit Images</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="{% static 'houseplants/houseplants_style.css' %}">
</head>
<body style="max-width: 100%;">

<div class="houseplants_box">
    <div style="padding: 8px;"></div>
    <form action="{% url 'houseplants:reddit_images' %}" method="post">
    {% csrf_token %}
        <div class="houseplant_reddit_images_header">
            <div style="display: flex;">
                <div style="padding: 8px;"></div>
                <div class="houseplant_selectors">
                    <div>
                        <label>Image Sorting: </label>
                        <select name="sorting_method">
                            {% for sort_item in sorting_items %}
                                {% if sort_item == selected_sort %}
                                    <option name="{{ sort_item }}" value="{{ sort_item }}" selected>{{ sort_item }}</option>
                                {% else %}
                                    <option name="{{ sort_item }}" value="{{ sort_item }}">{{ sort_item }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <br><br>
                        <label>Display Count: </label>
                        <textarea name="display_count_text" class="houseplant_display_count">{{ page_image_limit }}</textarea>
                    </div>
                    <div style="padding: 8px;"></div>
                    <div style="text-align: center;">
                        <input type="submit" value="Go" name="sorting_submit" class="reddit_images_updater">
                    </div>
                </div>
            </div>
            <div style="display: flex;">
                <div class="houseplant_pages">
                    {% for page in houseplant_images %}
                        {% if not page|check_current_page:current_page %}
                            <input type="submit" value="{{ page }}" name="page_select" class="reddit_images_other_page">
                        {% else %}
                            <label class="reddit_images_current_page">{{ page }}</label>
                        {% endif %}
                    {% endfor %}
                </div>
                <div style="padding: 8px;"></div>
            </div>
        </div>
    </form>

    <div style="padding: 6px;"></div>

    {% for image_list in houseplant_images|index:current_page %}
        <div class="houseplant_row">
            {% for image_item in image_list %}
                <img class="houseplant_image" src="{{ image_item.get_media_url }}">
                <div style="padding: 6px;"></div>
            {% endfor %}
        </div>
        <br>
    {% endfor %}
</div>
</body>
</html>